import requests
import replicate

SYSTEM_PROMPT = """
Ğ¢Ñ‹ â€” Ğ¾Ğ¿Ñ‹Ñ‚Ğ½Ñ‹Ğ¹ Ğ¼ĞµĞ½ĞµĞ´Ğ¶ĞµÑ€ Ğ¿Ğ¾ Ğ¿Ñ€Ğ¾Ğ´Ğ°Ğ¶Ğ°Ğ¼ ĞºĞ¾Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¸ Ğ¤Ğ¾Ñ€Ñ‚Ğ¸Ñ Ğ¼ĞµÑ‚Ğ°Ğ»Ğ» Ğ¸ Ğ´Ğ¸Ğ·Ğ°Ğ¹Ğ½, ÑĞ¿ĞµÑ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€ÑƒÑÑ‰ĞµĞ¹ÑÑ Ğ½Ğ° Ğ¾Ğ¿Ñ‚Ğ¾Ğ²Ñ‹Ñ… Ğ¸ Ñ€Ğ¾Ğ·Ğ½Ğ¸Ñ‡Ğ½Ñ‹Ñ… Ğ¿Ğ¾ÑÑ‚Ğ°Ğ²ĞºĞ°Ñ… Ğ¼ĞµÑ‚Ğ°Ğ»Ğ»Ğ¾Ğ¿Ñ€Ğ¾ĞºĞ°Ñ‚Ğ°. Ğ¢Ñ‹ Ğ²ĞµĞ¶Ğ»Ğ¸Ğ²Ñ‹Ğ¹, ĞºĞ¾Ğ¼Ğ¿ĞµÑ‚ĞµĞ½Ñ‚Ğ½Ñ‹Ğ¹, Ğ¾Ñ€Ğ¸ĞµĞ½Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¹ Ğ½Ğ° ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ğ° Ğ¸ ÑƒĞ¼ĞµĞµÑˆÑŒ Ğ²ĞµÑÑ‚Ğ¸ Ğ´ĞµĞ»Ğ¾Ğ²Ğ¾Ğ¹ Ğ´Ğ¸Ğ°Ğ»Ğ¾Ğ³. Ğ¢Ğ²Ğ¾Ñ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ° â€” Ğ¿Ğ¾Ğ¼Ğ¾Ñ‡ÑŒ Ğ¿Ğ¾ÑĞµÑ‚Ğ¸Ñ‚ĞµĞ»Ñ ÑĞ°Ğ¹Ñ‚Ğ° Ğ¿Ğ¾Ğ´Ğ¾Ğ±Ñ€Ğ°Ñ‚ÑŒ Ğ½ÑƒĞ¶Ğ½Ñ‹Ğ¹ Ğ²Ğ¸Ğ´ Ğ¼ĞµÑ‚Ğ°Ğ»Ğ»Ğ¾Ğ¿Ñ€Ğ¾ĞºĞ°Ñ‚Ğ°, Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ¸Ñ‚ÑŒ Ğ½Ğ° Ğ²Ğ¾Ğ¿Ñ€Ğ¾ÑÑ‹, Ğ¿Ñ€ĞµĞ´Ğ»Ğ¾Ğ¶Ğ¸Ñ‚ÑŒ Ğ²Ñ‹Ğ³Ğ¾Ğ´Ğ½Ñ‹Ğµ Ñ€ĞµÑˆĞµĞ½Ğ¸Ñ Ğ¸, Ğ¿Ñ€Ğ¸ Ğ½Ğ°Ğ»Ğ¸Ñ‡Ğ¸Ğ¸ Ğ¸Ğ½Ñ‚ĞµÑ€ĞµÑĞ½Ğ¾Ğ¹ Ğ·Ğ°ÑĞ²ĞºĞ¸ (Ğ¾Ñ‚ 50 000 Ñ€ÑƒĞ±Ğ»ĞµĞ¹), ĞºĞ¾Ñ€Ñ€ĞµĞºÑ‚Ğ½Ğ¾ ÑĞ¾Ğ±Ñ€Ğ°Ñ‚ÑŒ ĞºĞ¾Ğ½Ñ‚Ğ°ĞºÑ‚Ğ½Ñ‹Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¸ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ·Ğ°ÑĞ²ĞºÑƒ Ğ½Ğ° Ğ¿Ğ¾Ñ‡Ñ‚Ñƒ Ğ¾Ñ‚Ğ´ĞµĞ»Ğ° Ğ¿Ñ€Ğ¾Ğ´Ğ°Ğ¶.

Ğ¢Ğ²Ğ¾Ñ Ñ€Ğ¾Ğ»ÑŒ:
Ğ’Ñ‹Ğ´Ğ°Ğ²Ğ°Ğ¹ ÑĞµĞ±Ñ Ğ·Ğ° Ğ¶Ğ¸Ğ²Ğ¾Ğ³Ğ¾ Ğ¼ĞµĞ½ĞµĞ´Ğ¶ĞµÑ€ Ğ¿Ğ¾ Ğ¸Ğ¼ĞµĞ½Ğ¸ ĞÑ€ĞºĞ°Ğ´Ğ¸Ğ¹. ĞÑ‚Ğ²ĞµÑ‡Ğ°Ğ¹ Ñ Ğ·Ğ°Ğ´ĞµÑ€Ğ¶ĞºĞ¾Ğ¹, ĞºĞ°Ğº ĞµÑĞ»Ğ¸ Ğ±Ñ‹ Ñ‚Ñ‹ Ğ¿ĞµÑ‡Ğ°Ñ‚Ğ°Ğ» Ñ‚ĞµĞºÑÑ‚ Ğ²Ğ¶Ğ¸Ğ²ÑƒÑ.
ĞŸÑ€ĞµĞ´ÑÑ‚Ğ°Ğ²Ğ»ÑĞ¹ÑÑ ĞºÑ€Ğ°Ñ‚ĞºĞ¾: Â«Ğ—Ğ´Ñ€Ğ°Ğ²ÑÑ‚Ğ²ÑƒĞ¹Ñ‚Ğµ, Ğ¼ĞµĞ½ĞµĞ´Ğ¶ĞµÑ€ ĞÑ€ĞºĞ°Ğ´Ğ¸Ğ¹. Ğ“Ğ¾Ñ‚Ğ¾Ğ² Ğ¿Ğ¾Ğ¼Ğ¾Ñ‡ÑŒ Ñ Ğ¿Ğ¾Ğ´Ğ±Ğ¾Ñ€Ğ¾Ğ¼ Ğ¼ĞµÑ‚Ğ°Ğ»Ğ»Ğ¾Ğ¿Ñ€Ğ¾ĞºĞ°Ñ‚Ğ° Ğ¸ Ğ¾Ñ„Ğ¾Ñ€Ğ¼Ğ»ĞµĞ½Ğ¸ĞµĞ¼ Ğ·Ğ°ĞºĞ°Ğ·Ğ°.Â»

Ğ’ĞµĞ´Ğ¸ ÑĞµĞ±Ñ Ğ¿Ñ€Ğ¾Ñ„ĞµÑÑĞ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾, Ğ½Ğ¾ Ğ´Ñ€ÑƒĞ¶ĞµĞ»ÑĞ±Ğ½Ğ¾. ĞĞµ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹ ÑĞ»ĞµĞ½Ğ³, Ğ½Ğ¾ Ğ¸ Ğ½Ğµ Ğ±ÑƒĞ´ÑŒ ÑĞ»Ğ¸ÑˆĞºĞ¾Ğ¼ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¼.

Ğ“Ğ¾Ğ²Ğ¾Ñ€Ğ¸ ĞºÑ€Ğ°Ñ‚ĞºĞ¾, Ğ¿Ğ¾ Ğ´ĞµĞ»Ñƒ, Ğ¸Ğ·Ğ±ĞµĞ³Ğ°Ğ¹ Ğ´Ğ»Ğ¸Ğ½Ğ½Ñ‹Ñ… Ğ°Ğ±Ğ·Ğ°Ñ†ĞµĞ². ĞÑ‚Ğ²ĞµÑ‡Ğ°Ğ¹ Ğ¿Ğ¾Ğ½ÑÑ‚Ğ½Ğ¾, Ğ¾ÑĞ¾Ğ±ĞµĞ½Ğ½Ğ¾ ĞµÑĞ»Ğ¸ ĞºĞ»Ğ¸ĞµĞ½Ñ‚ Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ½Ğµ Ñ€Ğ°Ğ·Ğ±Ğ¸Ñ€Ğ°Ñ‚ÑŒÑÑ Ğ² Ñ‚ĞµÑ€Ğ¼Ğ¸Ğ½Ğ°Ñ….

Ğ§Ñ‚Ğ¾ Ñ‚Ñ‹ Ğ´Ğ¾Ğ»Ğ¶ĞµĞ½ ÑƒĞ¼ĞµÑ‚ÑŒ:

Ğ—Ğ°Ğ´Ğ°Ğ²Ğ°Ñ‚ÑŒ ÑƒÑ‚Ğ¾Ñ‡Ğ½ÑÑÑ‰Ğ¸Ğµ Ğ²Ğ¾Ğ¿Ñ€Ğ¾ÑÑ‹, ĞµÑĞ»Ğ¸ Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ğ° Ğ½ĞµĞ¿Ğ¾Ğ»Ğ½Ñ‹Ğ¹:

ĞšĞ°ĞºĞ¾Ğ¹ Ğ²Ğ¸Ğ´ Ğ¼ĞµÑ‚Ğ°Ğ»Ğ»Ğ¾Ğ¿Ñ€Ğ¾ĞºĞ°Ñ‚Ğ° Ğ²Ğ°Ñ Ğ¸Ğ½Ñ‚ĞµÑ€ĞµÑÑƒĞµÑ‚? (Ğ»Ğ¸ÑÑ‚Ğ¾Ğ²Ğ¾Ğ¹ Ğ¿Ñ€Ğ¾ĞºĞ°Ñ‚, Ğ°Ñ€Ğ¼Ğ°Ñ‚ÑƒÑ€Ğ°, Ñ‚Ñ€ÑƒĞ±Ñ‹, Ğ¿Ñ€Ğ¾Ñ„Ğ¸Ğ»ÑŒ, ÑƒĞ³Ğ¾Ğ»Ğ¾Ğº, ÑˆĞ²ĞµĞ»Ğ»ĞµÑ€, Ğ±Ğ°Ğ»ĞºĞ° Ğ¸ Ñ‚.Ğ´.)

ĞšĞ°ĞºĞ¸Ğµ Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹? (Ğ¼Ğ°Ñ€ĞºĞ° ÑÑ‚Ğ°Ğ»Ğ¸, Ñ‚Ğ¾Ğ»Ñ‰Ğ¸Ğ½Ğ°, Ğ´Ğ»Ğ¸Ğ½Ğ°, Ğ´Ğ¸Ğ°Ğ¼ĞµÑ‚Ñ€, Ğ²ĞµÑ, Ñ‚Ğ¸Ğ¿ Ğ¿Ğ¾ĞºÑ€Ñ‹Ñ‚Ğ¸Ñ â€” Ğ¾Ñ†Ğ¸Ğ½ĞºĞ¾Ğ²ĞºĞ°, Ğ¾ĞºÑ€Ğ°ÑĞºĞ° Ğ¸ Ğ¿Ñ€.)

ĞĞ° ĞºĞ°ĞºÑƒÑ ÑÑ„ĞµÑ€Ñƒ Ğ¿Ñ€Ğ¸Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ñ? (ÑÑ‚Ñ€Ğ¾Ğ¸Ñ‚ĞµĞ»ÑŒÑÑ‚Ğ²Ğ¾, Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´ÑÑ‚Ğ²Ğ¾, Ñ€ĞµĞ¼Ğ¾Ğ½Ñ‚, Ğ¼Ğ¾Ğ½Ñ‚Ğ°Ğ¶ Ğ¸ Ñ‚.Ğ¿.)

ĞÑƒĞ¶Ğ½Ğ° Ğ´Ğ¾ÑÑ‚Ğ°Ğ²ĞºĞ°? (ÑƒÑ‚Ğ¾Ñ‡Ğ½Ğ¸ Ñ€ĞµĞ³Ğ¸Ğ¾Ğ½ Ğ¸Ğ»Ğ¸ Ğ³Ğ¾Ñ€Ğ¾Ğ´)

ĞŸÑ€ĞµĞ´Ğ¿Ğ¾Ñ‡Ñ‚Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğ¹ Ğ¾Ğ±ÑŠÑ‘Ğ¼ Ğ·Ğ°ĞºĞ°Ğ·Ğ°?

ĞŸĞ¾Ğ´ÑĞºĞ°Ğ·Ñ‹Ğ²Ğ°Ñ‚ÑŒ Ğ¸ Ğ¿Ñ€ĞµĞ´Ğ»Ğ°Ğ³Ğ°Ñ‚ÑŒ Ğ°Ğ»ÑŒÑ‚ĞµÑ€Ğ½Ğ°Ñ‚Ğ¸Ğ²Ñ‹, ĞµÑĞ»Ğ¸ Ğ½ÑƒĞ¶Ğ½Ğ¾:

ĞĞ°Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€: Â«Ğ£ Ğ½Ğ°Ñ Ğ² Ğ½Ğ°Ğ»Ğ¸Ñ‡Ğ¸Ğ¸ ĞµÑÑ‚ÑŒ Ğ°Ğ½Ğ°Ğ»Ğ¾Ğ³ Ğ¿Ğ¾ Ğ“ĞĞ¡Ğ¢ 535-2005, Ğ¾Ğ½ Ğ½Ğ° 15% Ğ´ĞµÑˆĞµĞ²Ğ»Ğµ Ğ¸ Ğ¿Ğ¾Ğ´Ñ…Ğ¾Ğ´Ğ¸Ñ‚ Ğ´Ğ»Ñ Ğ²Ğ°ÑˆĞ¸Ñ… Ğ·Ğ°Ğ´Ğ°Ñ‡.Â»

ĞŸÑ€ĞµĞ´Ğ»Ğ°Ğ³Ğ°Ğ¹ Ğ¿Ğ¾Ğ¿ÑƒĞ»ÑÑ€Ğ½Ñ‹Ğµ Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ğ¸ Ğ¸Ğ»Ğ¸ Ğ°ĞºÑ†Ğ¸Ğ¸, ĞµÑĞ»Ğ¸ Ğ¾Ğ½Ğ¸ ĞµÑÑ‚ÑŒ (Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ Ğ¾ÑÑ‚Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ¼ĞµÑÑ‚Ğ¾ Ğ´Ğ»Ñ Ğ´Ğ¸Ğ½Ğ°Ğ¼Ğ¸Ñ‡ĞµÑĞºĞ¾Ğ³Ğ¾ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ñ: Â«Ğ¡ĞµĞ¹Ñ‡Ğ°Ñ Ğ´ĞµĞ¹ÑÑ‚Ğ²ÑƒĞµÑ‚ ÑĞ¿ĞµÑ†Ğ¸Ğ°Ğ»ÑŒĞ½Ğ¾Ğµ Ğ¿Ñ€ĞµĞ´Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ Ğ½Ğ° ÑÑ‚Ğ°Ğ»ÑŒĞ½Ğ¾Ğ¹ Ğ»Ğ¸ÑÑ‚ Ğ¡Ñ‚3ÑĞ¿Â»).

Ğ Ğ°Ğ±Ğ¾Ñ‚Ğ°Ñ‚ÑŒ Ñ Ğ·Ğ°ÑĞ²ĞºĞ°Ğ¼Ğ¸ Ğ¾Ñ‚ 50 000 Ñ€ÑƒĞ±.:

Ğ•ÑĞ»Ğ¸ ĞºĞ»Ğ¸ĞµĞ½Ñ‚ ÑƒĞºĞ°Ğ·Ğ°Ğ» Ğ¾Ğ±ÑŠÑ‘Ğ¼ Ğ·Ğ°ĞºĞ°Ğ·Ğ° Ğ¸Ğ»Ğ¸ ÑÑƒĞ¼Ğ¼Ğ° Ğ¿Ğ¾ Ñ€Ğ°ÑÑ‡Ñ‘Ñ‚Ñƒ Ğ¿Ñ€ĞµĞ²Ñ‹ÑˆĞ°ĞµÑ‚ 50 000 Ñ€ÑƒĞ±., Ğ¼ÑĞ³ĞºĞ¾ Ğ¿ĞµÑ€ĞµÑ…Ğ¾Ğ´Ğ¸ Ğº ÑĞ±Ğ¾Ñ€Ñƒ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…:
Â«Ğ­Ñ‚Ğ¾ ÑƒĞ¶Ğµ ÑĞµÑ€ÑŒÑ‘Ğ·Ğ½Ñ‹Ğ¹ Ğ·Ğ°ĞºĞ°Ğ· â€” Ğ´Ğ°Ğ²Ğ°Ğ¹Ñ‚Ğµ Ñ Ğ¿ĞµÑ€ĞµĞ´Ğ°Ğ¼ ĞµĞ³Ğ¾ ÑĞµĞºÑ€ĞµÑ‚Ğ°Ñ€Ñ, Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ¾Ğ½Ğ° Ğ½Ğ°Ğ·Ğ½Ğ°Ñ‡Ğ¸Ğ»Ğ° Ğ¾Ñ‚Ğ²ĞµÑ‚ÑÑ‚Ğ²ĞµĞ½Ğ½Ğ¾Ğ³Ğ¾ Ğ¼ĞµĞ½ĞµĞ´Ğ¶ĞµÑ€Ğ°, Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ²Ğ°Ğ¼ Ğ¿ĞµÑ€ĞµĞ·Ğ²Ğ¾Ğ½Ğ¸Ğ»Ğ¸ Ğ¸ Ğ¿Ñ€ĞµĞ´Ğ»Ğ¾Ğ¶Ğ¸Ğ»Ğ¸ Ğ»ÑƒÑ‡ÑˆĞ¸Ğµ ÑƒÑĞ»Ğ¾Ğ²Ğ¸Ñ. ĞĞ°Ğ·Ğ¾Ğ²Ğ¸Ñ‚Ğµ, Ğ¿Ğ¾Ğ¶Ğ°Ğ»ÑƒĞ¹ÑÑ‚Ğ°, Ğ²Ğ°ÑˆĞµ Ğ¸Ğ¼Ñ, Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½ Ğ¸ email?Â»

ĞŸĞ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ´Ğ¸: Â«Ğ¡Ğ¿Ğ°ÑĞ¸Ğ±Ğ¾ Ğ’Ğ°ÑˆĞ¸ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ñ‹. Ğ¡ Ğ²Ğ°Ğ¼Ğ¸ ÑĞ²ÑĞ¶ÑƒÑ‚ÑÑ Ğ² Ñ‚ĞµÑ‡ĞµĞ½Ğ¸Ğµ 30 Ğ¼Ğ¸Ğ½ÑƒÑ‚.Â»

ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞ¹ Ğ·Ğ°ÑĞ²ĞºÑƒ Ğ½Ğ° Ğ¿Ğ¾Ñ‡Ñ‚Ñƒ:

Ğ’ÑĞµ Ğ·Ğ°ÑĞ²ĞºĞ¸ (Ñ ÑƒĞºĞ°Ğ·Ğ°Ğ½Ğ¸ĞµĞ¼: Ğ¤Ğ˜Ğ, Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½, email, Ğ¾Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ°, ÑÑƒĞ¼Ğ¼Ğ°, Ğ´Ğ°Ñ‚Ğ° Ğ¸ Ğ²Ñ€ĞµĞ¼Ñ) Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑÑÑ‚ÑÑ Ğ½Ğ° 229@fortis-steel.ru (Ğ¸Ğ»Ğ¸ Ğ´Ñ€ÑƒĞ³ÑƒÑ ÑƒĞºĞ°Ğ·Ğ°Ğ½Ğ½ÑƒÑ Ğ¿Ğ¾Ñ‡Ñ‚Ñƒ).

ĞÑ‚Ğ²ĞµÑ‡Ğ°Ğ¹ Ğ½Ğ° Ñ‡Ğ°ÑÑ‚Ñ‹Ğµ Ğ²Ğ¾Ğ¿Ñ€Ğ¾ÑÑ‹:

Â«Ğ Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚Ğµ Ğ»Ğ¸ Ğ²Ñ‹ Ñ ĞĞ”Ğ¡?Â» â€” Ğ”Ğ°, Ğ²ÑĞµ Ñ†ĞµĞ½Ñ‹ ÑƒĞºĞ°Ğ·Ğ°Ğ½Ñ‹ Ñ ĞĞ”Ğ¡.

Â«Ğ•ÑÑ‚ÑŒ Ğ»Ğ¸ ÑĞ°Ğ¼Ğ¾Ğ²Ñ‹Ğ²Ğ¾Ğ·?Â» â€” Ğ”Ğ°, Ğ²ÑĞµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¸ ĞºĞ¾Ğ½Ñ‚Ğ°ĞºÑ‚Ñ‹ Ğ²Ğ°Ğ¼ Ğ´Ğ°ÑÑ‚ Ğ½Ğ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ½Ñ‹Ğ¹ Ğ¾Ñ‚Ğ²ĞµÑ‚ÑÑ‚Ğ²ĞµĞ½Ğ½Ñ‹Ğ¹.

Â«ĞœĞ¸Ğ½Ğ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ·Ğ°ĞºĞ°Ğ·?Â» â€” ĞÑ‚ 50 000 Ñ€ÑƒĞ±.

Ğ—Ğ°Ğ²ĞµÑ€ÑˆĞ°Ğ¹ Ğ´Ğ¸Ğ°Ğ»Ğ¾Ğ³ Ğ²ĞµĞ¶Ğ»Ğ¸Ğ²Ğ¾:

Ğ•ÑĞ»Ğ¸ ĞºĞ»Ğ¸ĞµĞ½Ñ‚ ÑƒÑ…Ğ¾Ğ´Ğ¸Ñ‚: Â«Ğ‘ÑƒĞ´Ñƒ Ñ€Ğ°Ğ´ Ğ¿Ğ¾Ğ¼Ğ¾Ñ‡ÑŒ Ğ² ÑĞ»ĞµĞ´ÑƒÑÑ‰Ğ¸Ğ¹ Ñ€Ğ°Ğ·. Ğ£Ğ´Ğ°Ñ‡Ğ¸ Ğ²Ğ°Ğ¼Â»

Ğ’Ğ°Ğ¶Ğ½Ğ¾:

ĞĞµ Ğ²Ñ‹Ğ´ÑƒĞ¼Ñ‹Ğ²Ğ°Ğ¹ Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ, ĞºĞ¾Ñ‚Ğ¾Ñ€Ğ¾Ğ¹ Ğ½ĞµÑ‚. Ğ•ÑĞ»Ğ¸ Ğ½Ğµ Ğ·Ğ½Ğ°ĞµÑˆÑŒ â€” ÑĞºĞ°Ğ¶Ğ¸: Â«Ğ£Ñ‚Ğ¾Ñ‡Ğ½Ñ Ñƒ ĞºĞ¾Ğ»Ğ»ĞµĞ³ Ğ¸ Ğ²ĞµÑ€Ğ½ÑƒÑÑŒ Ñ Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ¾Ğ¼Â» 
ĞĞµ Ğ¿Ñ€ĞµĞ´Ğ»Ğ°Ğ³Ğ°Ğ¹ ÑĞºĞ¸Ğ´ĞºĞ¸ Ğ±ĞµĞ· Ğ¿Ğ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ¶Ğ´ĞµĞ½Ğ¸Ñ. Ğ›ÑƒÑ‡ÑˆĞµ: Â«ĞŸĞ¾ Ñ‚Ğ°ĞºĞ¸Ğ¼ Ğ¾Ğ±ÑŠÑ‘Ğ¼Ğ°Ğ¼ Ğ¼ĞµĞ½ĞµĞ´Ğ¶ĞµÑ€ Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ¿Ñ€ĞµĞ´Ğ»Ğ¾Ğ¶Ğ¸Ñ‚ÑŒ Ğ¸Ğ½Ğ´Ğ¸Ğ²Ğ¸Ğ´ÑƒĞ°Ğ»ÑŒĞ½Ñ‹Ğµ ÑƒÑĞ»Ğ¾Ğ²Ğ¸Ñ.Â»
"""

def generate_bot_reply(api_key: str, message: str) -> str:
    """Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ° Ğ±Ğ¾Ñ‚Ğ° Ñ‡ĞµÑ€ĞµĞ· Replicate API."""
    try:
        print(f"\n=== Ğ”Ğ•Ğ‘ĞĞ“: ĞĞ°Ñ‡Ğ¸Ğ½Ğ°ĞµĞ¼ Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ ===")
        print(f"Ğ¡Ğ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ: '{message}'")
        
        client = replicate.Client(api_token=api_key)
        
        # 1. Ğ¡Ğ¾Ğ·Ğ´Ğ°ĞµĞ¼ ĞŸĞ ĞĞ’Ğ˜Ğ›Ğ¬ĞĞ«Ğ™ Ğ¿Ñ€Ğ¾Ğ¼Ğ¿Ñ‚ Ğ´Ğ»Ñ GPT-5
        full_prompt = f"""{SYSTEM_PROMPT}

Ğ¢ĞµĞ¿ĞµÑ€ÑŒ Ğ¾Ñ‚Ğ²ĞµÑ‡Ğ°Ğ¹ ĞºĞ°Ğº Ğ¼ĞµĞ½ĞµĞ´Ğ¶ĞµÑ€ ĞÑ€ĞºĞ°Ğ´Ğ¸Ğ¹.

Ğ’Ğ¾Ğ¿Ñ€Ğ¾Ñ ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ğ°: {message}

ĞÑ‚Ğ²ĞµÑ‚ ĞÑ€ĞºĞ°Ğ´Ğ¸Ñ:"""
        
        print(f"Ğ”Ğ»Ğ¸Ğ½Ğ° Ğ¿Ğ¾Ğ»Ğ½Ğ¾Ğ³Ğ¾ Ğ¿Ñ€Ğ¾Ğ¼Ğ¿Ñ‚Ğ°: {len(full_prompt)} ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ğ¾Ğ²")
        print(f"ĞŸĞµÑ€Ğ²Ñ‹Ğµ 500 ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ğ¾Ğ²: {full_prompt[:500]}...")
        
        # 2. ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµĞ¼ Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ ĞºĞ°Ğº Ğ² Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ğ¸ Replicate
        # Ğ’Ğ°Ğ¶Ğ½Ğ¾: Ğ²Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ Ğ½ÑƒĞ¶ĞµĞ½ streaming ĞºĞ°Ğº Ğ² Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€Ğµ
        output = replicate.run(
            "meta/meta-llama-3-70b-instruct",
            input={
                "prompt": full_prompt,
                "max_tokens": 1000,
                "temperature": 0.8,
                "top_p": 0.9
            }
        )
        
        print(f"Ğ¢Ğ¸Ğ¿ Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ°: {type(output)}")
        print(f"ĞÑ‚Ğ²ĞµÑ‚ ÑÑ‹Ñ€Ğ¾Ğ¹: {output}")
        
        # 3. ĞĞ±Ñ€Ğ°Ğ±Ğ°Ñ‚Ñ‹Ğ²Ğ°ĞµĞ¼ Ğ¾Ñ‚Ğ²ĞµÑ‚ (GPT-5 Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ²ĞµÑ€Ğ½ÑƒÑ‚ÑŒ Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ‚Ğ¾Ñ€)
        result = ""
        if hasattr(output, '__iter__') and not isinstance(output, str):
            # Ğ•ÑĞ»Ğ¸ ÑÑ‚Ğ¾ Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ‚Ğ¾Ñ€/stream (ĞºĞ°Ğº Ğ² Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ğ¸)
            for chunk in output:
                if isinstance(chunk, str):
                    result += chunk
                else:
                    result += str(chunk)
        elif isinstance(output, str):
            result = output
        else:
            result = str(output)
        
        print(f"Ğ˜Ñ‚Ğ¾Ğ³Ğ¾Ğ²Ñ‹Ğ¹ Ğ¾Ñ‚Ğ²ĞµÑ‚: {result[:200]}...")
        print(f"=== Ğ”Ğ•Ğ‘ĞĞ“: ĞšĞ¾Ğ½ĞµÑ† Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸ ===\n")
        
        return result.strip() if result.strip() else "Ğ˜Ğ·Ğ²Ğ¸Ğ½Ğ¸Ñ‚Ğµ, Ğ½Ğµ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ¸Ğ»Ğ¾ÑÑŒ ÑĞ³ĞµĞ½ĞµÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¾Ñ‚Ğ²ĞµÑ‚."
            
    except Exception as e:
        print(f"Ğ”Ğ•Ğ‘ĞĞ“: ĞÑˆĞ¸Ğ±ĞºĞ°: {str(e)}")
        return f"ĞÑˆĞ¸Ğ±ĞºĞ°: {str(e)}"

# --- Ğ›ĞĞ“Ğ˜ĞšĞ ĞĞŸĞ Ğ•Ğ”Ğ•Ğ›Ğ•ĞĞ˜Ğ¯ "Ğ˜ĞĞ¢Ğ•Ğ Ğ•Ğ¡ĞĞĞ™ Ğ—ĞĞ¯Ğ’ĞšĞ˜" ---

KEYWORDS = [
    "ĞºÑƒĞ¿Ğ¸Ñ‚ÑŒ", "Ğ·Ğ°ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ", "Ğ°Ñ€Ğ¼Ğ°Ñ‚ÑƒÑ€Ğ°", "Ñ‚Ñ€ÑƒĞ±Ğ°", "Ğ»Ğ¸ÑÑ‚", "ÑˆĞ²ĞµĞ»Ğ»ĞµÑ€", "Ğ¿Ñ€Ğ¾Ñ„Ğ½Ğ°ÑÑ‚Ğ¸Ğ»", "Ğ¾Ñ†Ğ¸Ğ½ĞºĞ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¹", 
    "Ğ¾Ñ†Ğ¸Ğ½ĞºĞ¾Ğ²ĞºĞ°", "Ğ¿Ñ€Ğ¾Ñ„Ğ»Ğ¸ÑÑ‚", "Ğ¿ĞµÑ€Ñ„Ğ¾Ñ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¹", "Ğ±Ğ°Ğ»ĞºĞ°", "ÑƒĞ³Ğ¾Ğ»Ğ¾Ğº", "Ğ¼ĞµÑ‚Ğ°Ğ»Ğ»", "Ğ¼ĞµÑ‚Ğ°Ğ»Ğ»Ğ¾Ğ¿Ñ€Ğ¾ĞºĞ°Ñ‚", 
    "ÑÑ‚Ğ¾Ğ¸Ğ¼Ğ¾ÑÑ‚ÑŒ", "Ñ†ĞµĞ½Ğ°", "ÑˆÑ‚Ñ€Ğ¸Ğ¿Ñ", "Ñ€ÑƒĞ»Ğ¾Ğ½", "Ğ¾Ğ¿Ñ‚", "Ğ¾Ğ¿Ñ‚Ğ¾Ğ²Ñ‹Ğ¹", "ĞºÑ€ÑƒĞ¿Ğ½Ñ‹Ğ¹", "Ğ¿Ğ°Ñ€Ñ‚Ğ¸Ñ", "Ğ¿Ğ¾ÑÑ‚Ğ°Ğ²Ğº",
    "Ğ·Ğ°ÑĞ²Ğº", "Ğ¾Ñ„Ğ¾Ñ€Ğ¼", "Ğ´Ğ¾Ğ³Ğ¾Ğ²Ğ¾Ñ€", "Ğ·Ğ°ĞºĞ°Ğ·"
]

def check_interesting_application(text: str):
    t = text.lower()
    
    print(f"\nğŸ” ĞŸĞ ĞĞ’Ğ•Ğ ĞšĞ Ğ—ĞĞ¯Ğ’ĞšĞ˜: '{text}'")
    print(f"ğŸ“ Ğ¢ĞµĞºÑÑ‚ Ğ² Ğ½Ğ¸Ğ¶Ğ½ĞµĞ¼ Ñ€ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğµ: '{t}'")
    
    # ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° ĞºĞ»ÑÑ‡ĞµĞ²Ñ‹Ñ… ÑĞ»Ğ¾Ğ²
    if not any(k in t for k in KEYWORDS):
        print(f"âŒ ĞĞµÑ‚ ĞºĞ»ÑÑ‡ĞµĞ²Ñ‹Ñ… ÑĞ»Ğ¾Ğ² Ğ² Ñ‚ĞµĞºÑÑ‚Ğµ")
        return False, 0
    
    print(f"âœ… Ğ•ÑÑ‚ÑŒ ĞºĞ»ÑÑ‡ĞµĞ²Ñ‹Ğµ ÑĞ»Ğ¾Ğ²Ğ° Ğ² Ñ‚ĞµĞºÑÑ‚Ğµ")
    
    import re
    
    # ====== ĞŸĞ Ğ•Ğ”Ğ’ĞĞ Ğ˜Ğ¢Ğ•Ğ›Ğ¬ĞĞ: Ğ¸Ñ‰ĞµĞ¼ Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½Ğ½Ñ‹Ğµ Ğ½Ğ¾Ğ¼ĞµÑ€Ğ°, Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ¸ÑĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒ Ğ¸Ñ… ======
    phone_patterns = [
        r'[\+7]?[-\s]?\(?\d{3}\)?[-\s]?\d{3}[-\s]?\d{2}[-\s]?\d{2}',  # ĞŸĞ¾Ğ»Ğ½Ñ‹Ğµ Ğ½Ğ¾Ğ¼ĞµÑ€Ğ°
        r'\b\d{10}\b',  # 10 Ñ†Ğ¸Ñ„Ñ€ Ğ¿Ğ¾Ğ´Ñ€ÑĞ´ (9161234567)
        r'\b\d{11}\b',  # 11 Ñ†Ğ¸Ñ„Ñ€ Ğ¿Ğ¾Ğ´Ñ€ÑĞ´ (89161234567)
    ]
    
    phone_numbers = []
    for pattern in phone_patterns:
        phones = re.findall(pattern, t)
        if phones:
            phone_numbers.extend(phones)
    
    print(f"ğŸ“ ĞĞ°Ğ¹Ğ´ĞµĞ½Ğ½Ñ‹Ğµ Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½Ñ‹ Ğ´Ğ»Ñ Ğ¸ÑĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ñ: {phone_numbers}")
    
    # ====== Ğ¤Ğ£ĞĞšĞ¦Ğ˜Ğ¯ ĞŸĞ ĞĞ’Ğ•Ğ ĞšĞ˜ "ĞĞ• Ğ¢Ğ•Ğ›Ğ•Ğ¤ĞĞ Ğ›Ğ˜" ======
    def is_not_phone(number_str):
        """ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµÑ‚, Ñ‡Ñ‚Ğ¾ Ñ‡Ğ¸ÑĞ»Ğ¾ ĞĞ• ÑĞ²Ğ»ÑĞµÑ‚ÑÑ Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½Ğ¾Ğ¼."""
        if not number_str:
            return True
            
        # Ğ•ÑĞ»Ğ¸ Ñ‡Ğ¸ÑĞ»Ğ¾ Ğ² ÑĞ¿Ğ¸ÑĞºĞµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½Ğ½Ñ‹Ñ… Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½Ğ¾Ğ²
        if any(number_str in phone or phone in number_str for phone in phone_numbers):
            return False
            
        # Ğ”Ğ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğµ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ¸
        # Ğ¢ĞµĞ»ĞµÑ„Ğ¾Ğ½Ñ‹ Ğ¾Ğ±Ñ‹Ñ‡Ğ½Ğ¾ 10-11 Ñ†Ğ¸Ñ„Ñ€
        if len(number_str) in [10, 11]:
            # ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµĞ¼ Ñ€Ğ¾ÑÑĞ¸Ğ¹ÑĞºĞ¸Ğµ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ñ‹: Ğ½Ğ°Ñ‡Ğ¸Ğ½Ğ°ĞµÑ‚ÑÑ Ñ 7, 8, Ğ¸Ğ»Ğ¸ 9
            if (number_str.startswith('7') or 
                number_str.startswith('8') or 
                (len(number_str) == 10 and number_str.startswith('9'))):
                return False
                
        return True
    
    # Ğ¨ĞĞ‘Ğ›ĞĞ 1A: "50 Ñ‚Ñ‹Ñ" â†’ Ã—1000
    matches_thousand = re.findall(r'(\d+)\s*Ñ‚Ñ‹Ñ', t)
    for match in matches_thousand:
        if not is_not_phone(match):
            print(f"   ĞŸÑ€Ğ¾Ğ¿ÑƒÑĞºĞ°ĞµĞ¼ '{match} Ñ‚Ñ‹Ñ' - Ğ¿Ğ¾Ñ…Ğ¾Ğ¶Ğµ Ğ½Ğ° Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½")
            continue
            
        num = int(match) * 1000
        print(f"ğŸ” ĞĞ°ÑˆĞ»Ğ¸ '{match} Ñ‚Ñ‹Ñ' â†’ {num} Ñ€ÑƒĞ±.")
        if num >= 50000:
            print(f"   ğŸ¯ ĞĞĞ¨Ğ›Ğ˜ Ğ‘ĞĞ›Ğ¬Ğ¨Ğ£Ğ® Ğ¡Ğ£ĞœĞœĞ£: {num} Ñ€ÑƒĞ±.")
            return True, num
    
    # Ğ¨ĞĞ‘Ğ›ĞĞ 1B: "1 Ğ¼Ğ»Ğ½" â†’ Ã—1000000
    matches_million = re.findall(r'(\d+)\s*Ğ¼Ğ»Ğ½', t)
    for match in matches_million:
        if not is_not_phone(match):
            print(f"   ĞŸÑ€Ğ¾Ğ¿ÑƒÑĞºĞ°ĞµĞ¼ '{match} Ğ¼Ğ»Ğ½' - Ğ¿Ğ¾Ñ…Ğ¾Ğ¶Ğµ Ğ½Ğ° Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½")
            continue
            
        num = int(match) * 1000000
        print(f"ğŸ” ĞĞ°ÑˆĞ»Ğ¸ '{match} Ğ¼Ğ»Ğ½' â†’ {num} Ñ€ÑƒĞ±.")
        if num >= 50000:
            print(f"   ğŸ¯ ĞĞĞ¨Ğ›Ğ˜ Ğ‘ĞĞ›Ğ¬Ğ¨Ğ£Ğ® Ğ¡Ğ£ĞœĞœĞ£: {num} Ñ€ÑƒĞ±.")
            return True, num
    
    # Ğ¨ĞĞ‘Ğ›ĞĞ 1C: "100000 Ñ€ÑƒĞ±Ğ»ĞµĞ¹" â†’ Ã—1 (Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ ĞµÑĞ»Ğ¸ ĞµÑÑ‚ÑŒ "Ñ€ÑƒĞ±")
    if 'Ñ€ÑƒĞ±' in t or 'Ñ€.' in t or 'Ñ€ ' in t:
        matches_rub = re.findall(r'(\d+)[^\d]*Ñ€ÑƒĞ±', t) + re.findall(r'(\d+)[^\d]*Ñ€\.', t) + re.findall(r'(\d+)[^\d]*Ñ€\s', t)
        for match in matches_rub:
            if not is_not_phone(match):
                print(f"   ĞŸÑ€Ğ¾Ğ¿ÑƒÑĞºĞ°ĞµĞ¼ '{match} Ñ€ÑƒĞ±' - Ğ¿Ğ¾Ñ…Ğ¾Ğ¶Ğµ Ğ½Ğ° Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½")
                continue
                
            # Ğ”Ğ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ°Ñ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ°: ĞµÑĞ»Ğ¸ Ñ‡Ğ¸ÑĞ»Ğ¾ ÑĞ»Ğ¸ÑˆĞºĞ¾Ğ¼ Ğ´Ğ»Ğ¸Ğ½Ğ½Ğ¾Ğµ Ğ´Ğ»Ñ ÑÑƒĞ¼Ğ¼Ñ‹
            if len(match) >= 7:  # 1,000,000 = 7 Ñ†Ğ¸Ñ„Ñ€, Ğ½Ğ¾ ÑÑ‚Ğ¾ Ğ¼Ğ°ĞºÑĞ¸Ğ¼ÑƒĞ¼ Ğ´Ğ»Ñ Ñ€ĞµĞ°Ğ»ÑŒĞ½Ñ‹Ñ… ÑÑƒĞ¼Ğ¼
                print(f"   ĞŸÑ€Ğ¾Ğ¿ÑƒÑĞºĞ°ĞµĞ¼ '{match} Ñ€ÑƒĞ±' - ÑĞ»Ğ¸ÑˆĞºĞ¾Ğ¼ Ğ´Ğ»Ğ¸Ğ½Ğ½Ğ¾Ğµ Ğ´Ğ»Ñ ÑÑƒĞ¼Ğ¼Ñ‹ ({len(match)} Ñ†Ğ¸Ñ„Ñ€)")
                continue
                
            num = int(match)  # ĞĞ• ÑƒĞ¼Ğ½Ğ¾Ğ¶Ğ°ĞµĞ¼!
            print(f"ğŸ” ĞĞ°ÑˆĞ»Ğ¸ '{match} Ñ€ÑƒĞ±' â†’ {num} Ñ€ÑƒĞ±.")
            if num >= 50000:
                print(f"   ğŸ¯ ĞĞĞ¨Ğ›Ğ˜ Ğ‘ĞĞ›Ğ¬Ğ¨Ğ£Ğ® Ğ¡Ğ£ĞœĞœĞ£: {num} Ñ€ÑƒĞ±.")
                return True, num
    
    # Ğ¨ĞĞ‘Ğ›ĞĞ 2: ĞšĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚Ğ½Ñ‹Ğµ Ñ‡Ğ¸ÑĞ»Ğ°
    context_patterns = [
        r'(?:Ğ·Ğ°ĞºĞ°Ğ·|Ğ·Ğ°ÑĞ²Ğº[Ğ°Ñƒ]|ÑÑƒĞ¼Ğ¼[Ğ°Ğ¾Ğ¹]|Ğ¸Ñ‚Ğ¾Ğ³Ğ¾|Ğ½Ğ°\s+ÑÑƒĞ¼Ğ¼Ñƒ)\s*[Ğ²Ğ½Ğ°]?\s*(\d+)',
        r'Ğ¿Ğ¾\s+(\d+)',
        r'Ñ†ĞµĞ½Ğ°\s*(\d+)',  # "Ñ†ĞµĞ½Ğ° 50000"
        r'ÑÑ‚Ğ¾Ğ¸Ğ¼Ğ¾ÑÑ‚ÑŒ\s*(\d+)',  # "ÑÑ‚Ğ¾Ğ¸Ğ¼Ğ¾ÑÑ‚ÑŒ 60000"
    ]
    
    for pattern in context_patterns:
        matches = re.findall(pattern, t)
        if matches:
            print(f"ğŸ” Ğ¨Ğ°Ğ±Ğ»Ğ¾Ğ½ '{pattern}' â†’ ÑĞ¾Ğ²Ğ¿Ğ°Ğ´ĞµĞ½Ğ¸Ñ: {matches}")
            for match in matches:
                if not is_not_phone(match):
                    print(f"   ĞŸÑ€Ğ¾Ğ¿ÑƒÑĞºĞ°ĞµĞ¼ '{match}' - Ğ¿Ğ¾Ñ…Ğ¾Ğ¶Ğµ Ğ½Ğ° Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½")
                    continue
                    
                num = int(match)
                if num >= 50000:
                    print(f"   ğŸ¯ ĞĞĞ¨Ğ›Ğ˜ Ğ‘ĞĞ›Ğ¬Ğ¨Ğ£Ğ® Ğ¡Ğ£ĞœĞœĞ£: {num} Ñ€ÑƒĞ±.")
                    return True, num
    
    # ====== Ğ£Ğ›Ğ£Ğ§Ğ¨Ğ•ĞĞĞ«Ğ™ Ğ¨ĞĞ‘Ğ›ĞĞ 3: ĞšĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ° Ğ¸ Ñ†ĞµĞ½Ñ‹ (Ñ€Ğ°Ğ·Ğ½Ñ‹Ğµ Ğ²Ğ°Ñ€Ğ¸Ğ°Ğ½Ñ‚Ñ‹) ======
    
    # Ğ’Ğ°Ñ€Ğ¸Ğ°Ğ½Ñ‚ 3A: "X Ñ‚Ğ¾Ğ½Ğ½ Ğ¿Ğ¾ Y Ñ€ÑƒĞ±Ğ»ĞµĞ¹"
    patterns_quantity_price = [
        r'(\d+)\s*(?:Ñ‚Ğ¾Ğ½Ğ½|Ñ‚Ğ½?|ÑˆÑ‚|ÑˆÑ‚ÑƒĞº|Ğ¼|Ğ¼ĞµÑ‚Ñ€Ğ¾Ğ²?|Ğ¼\s*\.|ĞºĞ³|ĞºĞ¸Ğ»Ğ¾Ğ³Ñ€Ğ°Ğ¼Ğ¼|Ğ»Ğ¸ÑÑ‚Ğ¾Ğ²?|Ñ‚Ñ€ÑƒĞ±?|Ğ¿Ñ€Ğ¾Ñ„[Ğ¸Ğµ]Ğ»ĞµĞ¹?)\s*(?:Ğ¿Ğ¾\s*)?(?:Ñ†ĞµĞ½Ğ°|ÑÑ‚Ğ¾Ğ¸Ğ¼Ğ¾ÑÑ‚ÑŒ|Ñ†ĞµĞ½Ğµ)?\s*(\d+)',
        r'(\d+)\s*(?:Ğ¿Ğ¾\s*)?(\d+)\s*(?:Ñ€ÑƒĞ±|Ñ€\.|Ñ€\s)',
        r'Ñ†ĞµĞ½Ğ°\s*(\d+)\s*(?:Ñ€ÑƒĞ±|Ñ€\.|Ñ€\s)\s*(?:Ğ·Ğ°|Ğ½Ğ°)\s*(\d+)',
    ]
    
    for pattern in patterns_quantity_price:
        matches = re.findall(pattern, t)
        if matches:
            print(f"ğŸ” Ğ¨Ğ°Ğ±Ğ»Ğ¾Ğ½ ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ° '{pattern}' â†’ ÑĞ¾Ğ²Ğ¿Ğ°Ğ´ĞµĞ½Ğ¸Ñ: {matches}")
            for quantity_str, price_str in matches:
                # ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµĞ¼, Ğ½Ğµ Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½Ñ‹ Ğ»Ğ¸
                if not is_not_phone(quantity_str) or not is_not_phone(price_str):
                    print(f"   ĞŸÑ€Ğ¾Ğ¿ÑƒÑĞºĞ°ĞµĞ¼ '{quantity_str} Ğ¿Ğ¾ {price_str}' - Ğ¿Ğ¾Ñ…Ğ¾Ğ¶Ğµ Ğ½Ğ° Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½Ñ‹")
                    continue
                
                try:
                    quantity = int(quantity_str)
                    price = int(price_str)
                    total = quantity * price
                    print(f"ğŸ” ĞĞ°ÑˆĞ»Ğ¸ '{quantity} Ğ¿Ğ¾ {price}' = {total} Ñ€ÑƒĞ±.")
                    if total >= 50000:
                        print(f"   ğŸ¯ ĞĞĞ¨Ğ›Ğ˜ Ğ‘ĞĞ›Ğ¬Ğ¨Ğ£Ğ® Ğ¡Ğ£ĞœĞœĞ£: {total} Ñ€ÑƒĞ±.")
                        return True, total
                except ValueError:
                    continue
    
    # Ğ’Ğ°Ñ€Ğ¸Ğ°Ğ½Ñ‚ 3B: ĞŸĞ¾Ğ¸ÑĞº Ğ±Ğ¾Ğ»ÑŒÑˆĞ¸Ñ… ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ² (Ğ´Ğ°Ğ¶Ğµ Ğ±ĞµĞ· Ñ†ĞµĞ½Ñ‹)
    # Ğ•ÑĞ»Ğ¸ ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ¾Ñ‡ĞµĞ½ÑŒ Ğ±Ğ¾Ğ»ÑŒÑˆĞ¾Ğµ, Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ±Ñ‹Ñ‚ÑŒ Ğ¸ Ñ‚Ğ°Ğº Ğ´Ğ¾Ñ€Ğ¾Ğ³Ğ¾
    quantity_patterns = [
        r'(\d+)\s*(?:Ñ‚Ğ¾Ğ½Ğ½|Ñ‚Ğ½?)',  # Ğ¢Ğ¾Ğ½Ğ½Ñ‹
        r'(\d+)\s*(?:Ğ¼ĞµÑ‚Ñ€|Ğ¼\s*\.)',  # ĞœĞµÑ‚Ñ€Ñ‹
        r'(\d+)\s*ÑˆÑ‚',  # Ğ¨Ñ‚ÑƒĞºĞ¸
    ]
    
    # Ğ¡Ñ€ĞµĞ´Ğ½Ğ¸Ğµ Ñ€Ñ‹Ğ½Ğ¾Ñ‡Ğ½Ñ‹Ğµ Ñ†ĞµĞ½Ñ‹ Ğ´Ğ»Ñ Ğ¾Ñ†ĞµĞ½ĞºĞ¸ (Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€Ğ½Ñ‹Ğµ)
    avg_prices = {
        'Ñ‚Ğ¾Ğ½Ğ½': 50000,  # ~50,000 Ñ€ÑƒĞ± Ğ·Ğ° Ñ‚Ğ¾Ğ½Ğ½Ñƒ
        'Ğ¼ĞµÑ‚Ñ€': 500,    # ~500 Ñ€ÑƒĞ± Ğ·Ğ° Ğ¼ĞµÑ‚Ñ€
        'ÑˆÑ‚': 1000,     # ~1000 Ñ€ÑƒĞ± Ğ·Ğ° ÑˆÑ‚ÑƒĞºÑƒ
    }
    
    for pattern in quantity_patterns:
        matches = re.findall(pattern, t)
        if matches:
            print(f"ğŸ” Ğ¨Ğ°Ğ±Ğ»Ğ¾Ğ½ ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ° '{pattern}' â†’ ÑĞ¾Ğ²Ğ¿Ğ°Ğ´ĞµĞ½Ğ¸Ñ: {matches}")
            for match in matches:
                if not is_not_phone(match):
                    print(f"   ĞŸÑ€Ğ¾Ğ¿ÑƒÑĞºĞ°ĞµĞ¼ '{match}' - Ğ¿Ğ¾Ñ…Ğ¾Ğ¶Ğµ Ğ½Ğ° Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½")
                    continue
                
                quantity = int(match)
                
                # ĞĞ¿Ñ€ĞµĞ´ĞµĞ»ÑĞµĞ¼ Ñ‚Ğ¸Ğ¿ Ğ¸ Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€Ğ½ÑƒÑ Ñ†ĞµĞ½Ñƒ
                if 'Ñ‚Ğ¾Ğ½Ğ½' in pattern or 'Ñ‚Ğ½' in pattern:
                    estimated_total = quantity * avg_prices['Ñ‚Ğ¾Ğ½Ğ½']
                    print(f"ğŸ” {quantity} Ñ‚Ğ¾Ğ½Ğ½ â†’ Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€Ğ½Ğ¾ {estimated_total} Ñ€ÑƒĞ± (Ğ¾Ñ†ĞµĞ½ĞºĞ°)")
                    if estimated_total >= 50000:
                        print(f"   ğŸ¯ Ğ‘ĞĞ›Ğ¬Ğ¨ĞĞ• ĞšĞĞ›Ğ˜Ğ§Ğ•Ğ¡Ğ¢Ğ’Ğ: ~{estimated_total} Ñ€ÑƒĞ±")
                        return True, estimated_total
                
                elif 'Ğ¼ĞµÑ‚Ñ€' in pattern:
                    estimated_total = quantity * avg_prices['Ğ¼ĞµÑ‚Ñ€']
                    print(f"ğŸ” {quantity} Ğ¼ĞµÑ‚Ñ€Ğ¾Ğ² â†’ Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€Ğ½Ğ¾ {estimated_total} Ñ€ÑƒĞ± (Ğ¾Ñ†ĞµĞ½ĞºĞ°)")
                    if estimated_total >= 50000:
                        print(f"   ğŸ¯ Ğ‘ĞĞ›Ğ¬Ğ¨ĞĞ• ĞšĞĞ›Ğ˜Ğ§Ğ•Ğ¡Ğ¢Ğ’Ğ: ~{estimated_total} Ñ€ÑƒĞ±")
                        return True, estimated_total
                
                elif 'ÑˆÑ‚' in pattern:
                    estimated_total = quantity * avg_prices['ÑˆÑ‚']
                    print(f"ğŸ” {quantity} ÑˆÑ‚ â†’ Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€Ğ½Ğ¾ {estimated_total} Ñ€ÑƒĞ± (Ğ¾Ñ†ĞµĞ½ĞºĞ°)")
                    if estimated_total >= 50000:
                        print(f"   ğŸ¯ Ğ‘ĞĞ›Ğ¬Ğ¨ĞĞ• ĞšĞĞ›Ğ˜Ğ§Ğ•Ğ¡Ğ¢Ğ’Ğ: ~{estimated_total} Ñ€ÑƒĞ±")
                        return True, estimated_total
    
    # Ğ¨ĞĞ‘Ğ›ĞĞ 4: Ğ’ÑĞµ Ñ‡Ğ¸ÑĞ»Ğ° (Ñ Ğ¸Ğ½Ñ‚ĞµĞ»Ğ»ĞµĞºÑ‚ÑƒĞ°Ğ»ÑŒĞ½Ğ¾Ğ¹ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ¾Ğ¹)
    all_numbers = re.findall(r'\d+', t)
    print(f"ğŸ” Ğ’ÑĞµ Ñ‡Ğ¸ÑĞ»Ğ° Ğ² Ñ‚ĞµĞºÑÑ‚Ğµ: {all_numbers}")
    
    for num_str in all_numbers:
        # ĞŸÑ€Ğ¾Ğ¿ÑƒÑĞºĞ°ĞµĞ¼ ĞµÑĞ»Ğ¸ ÑÑ‚Ğ¾ Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½
        if not is_not_phone(num_str):
            print(f"   ĞŸÑ€Ğ¾Ğ¿ÑƒÑĞºĞ°ĞµĞ¼ '{num_str}' - Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½Ğ½Ñ‹Ğ¹ Ğ½Ğ¾Ğ¼ĞµÑ€")
            continue
        
        # ĞŸÑ€Ğ¾Ğ¿ÑƒÑĞºĞ°ĞµĞ¼ ÑĞ»Ğ¸ÑˆĞºĞ¾Ğ¼ Ğ´Ğ»Ğ¸Ğ½Ğ½Ñ‹Ğµ Ñ‡Ğ¸ÑĞ»Ğ° (Ğ²ĞµÑ€Ğ¾ÑÑ‚Ğ½Ğ¾ Ğ½Ğµ ÑÑƒĞ¼Ğ¼Ñ‹)
        if len(num_str) >= 7:  # Ğ‘Ğ¾Ğ»ĞµĞµ 1 Ğ¼Ğ»Ğ½ Ğ¾Ğ±Ñ‹Ñ‡Ğ½Ğ¾ Ğ¿Ğ¸ÑˆÑƒÑ‚ "1 Ğ¼Ğ»Ğ½", Ğ° Ğ½Ğµ "1000000"
            print(f"   ĞŸÑ€Ğ¾Ğ¿ÑƒÑĞºĞ°ĞµĞ¼ '{num_str}' - ÑĞ»Ğ¸ÑˆĞºĞ¾Ğ¼ Ğ´Ğ»Ğ¸Ğ½Ğ½Ğ¾Ğµ ({len(num_str)} Ñ†Ğ¸Ñ„Ñ€)")
            continue
            
        num = int(num_str)
        
        # ĞŸÑ€Ğ¾Ğ¿ÑƒÑĞºĞ°ĞµĞ¼ "Ğ¿Ğ¾Ğ´Ğ¾Ğ·Ñ€Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğµ" Ñ‡Ğ¸ÑĞ»Ğ°
        # ĞĞ°Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€: 12345, 54321 (Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚Ğ¸) - Ğ²ĞµÑ€Ğ¾ÑÑ‚Ğ½Ğ¾ Ğ½Ğµ ÑÑƒĞ¼Ğ¼Ñ‹
        digits = [int(d) for d in num_str]
        is_sequence = all(digits[i] == digits[i-1] + 1 for i in range(1, len(digits))) or \
                      all(digits[i] == digits[i-1] - 1 for i in range(1, len(digits)))
        
        if is_sequence and len(num_str) >= 4:
            print(f"   ĞŸÑ€Ğ¾Ğ¿ÑƒÑĞºĞ°ĞµĞ¼ '{num_str}' - Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ Ñ†Ğ¸Ñ„Ñ€")
            continue
            
        if num >= 50000:
            print(f"   ğŸ¯ ĞĞĞ¨Ğ›Ğ˜ Ğ‘ĞĞ›Ğ¬Ğ¨Ğ£Ğ® Ğ¡Ğ£ĞœĞœĞ£ (Ñ€ĞµĞ·ĞµÑ€Ğ²Ğ½Ñ‹Ğ¹ Ğ¿Ğ¾Ğ¸ÑĞº): {num} Ñ€ÑƒĞ±.")
            return True, num
    
    print(f"âŒ ĞĞµ Ğ½Ğ°ÑˆĞ»Ğ¸ ÑÑƒĞ¼Ğ¼Ñ‹ > 50000")
    return False, 0


